# Mcdp # 

一个用来帮助制作数据包的Python库，  
名称"Mcdp"是"Minecraft datapack"的简称。

语言: [English](https://github.com/Ovizro/Mcdp/blob/master/doc/en_us/README.md) / 中文

## 为什么使用它? ## 

1. 目的不同:
   与mod不同，数据包是与世界绑定的。你可以为一个世界创造专有的玩法，
   而不会对其他世界造成影响。

1. 便捷:  
   相比常规的命令使用来说，Mcdp简化了调用命令的方式。
   使用Mcdp，你可以仅仅写一个简短的Python或Mcdl文件，然后编译出完整的数据包。

2. 简单:  
   Mcdp可以被认为是以Minecraft命令作为汇编，以Python作为解释器的高级语言。 
   由于Python本身的特点及Minecraft命令的普及性，Mcdp需要的编程基础相对较少。 
   而且，你可以方便的在函数中直接插入原版命令。

3. 无需Forge、Fabric等支持:  
   你可以直接在原版中将数据包放入世界存档来使用。和世界存档一起打包。

4. 兼容性较强:  
   Minecraft命令随版本变化较少，而且一般都是增加新的命令而已有命令保持不变。 因此只要不使用一些高版本特性，数据包很容易跨游戏版本使用而不必做出更改。

## 不适用情况 ## 

以下情况不适合使用Mcdp

1. 复杂的计算:  
   Mcdp生成的数据包的计算主要由记分板来完成。 原版命令提供的运算符较少，且计算效率低下。 虽然能够在Mcdp中通过计算实现各种数学函数，但从效率来看有些得不偿失。

2. 超出命令作用范畴:  
   Mcdp基于数据包，所有数据包无法涉及的领域Mcdp同样无法涉及。

## 工作方式 ##

Mcdp主要有三种工作方式: Python内部编写、由mcfzip快速创建和编译Mcdl文件。

1. Python内部编写(Pydp)

   优点
    1. 编译快速:  
       使用Python编写不需要进行复杂的编译， 所有的编译工作基本都交予Python解释器进行。
    2. Mcdp扩展支持:  
       目前Mcdp的扩展包只能用Pydp编写。
    3. 高自由度:  
       可以与OpenCV等Python库及Vmcl解释器进行交互。
    4. 不另需编译器:  
       可以直接由Python解释器启动编译。

   缺点
    1. 操作复杂:  
       所有Mcdp函数均需要使用mcfunc装饰器。 需要的变量大多需要自行创建。 由于if/for等关键字无法捕获，需要使用相应的 上下文管理器来代替(解决方案见'mcfunc&ast解析')。
    2. 难以检查错误:  
       Pydp很多错误难以在编译时检查，容易导致让人困惑的行为。
       (见'Pydp常见问题')

2. 使用mcfzip

   优点
    1. 简单便捷:  
       可以由单个文件创建整个数据包。而且基本不会出错。
       (如果命令拼错了……那就怪不得编译器了)
    2. 语法高亮兼容:  
       mcfzip的编译预处理命令是注释格式，不影响.mcfunction的语法高亮。

   缺点
    1. 功能简单:  
       简单，当然要简单到底。mcfzip只能生成含函数的数据包。 编译器只分隔命令到不同文件，不检查命令格式是否正确， 也不会对命令进行其他修改。
    2. 无扩展包:  
       mcfzip的编译不支持自定义，也没有任何可用的包。
